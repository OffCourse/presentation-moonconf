/*!
 * present 0.0.1 (2016-05-24, 19:33)
 */
var http=require("http"),express=require("express"),fs=require("fs"),io=require("socket.io"),Mustache=require("mustache"),app=express(),staticDir=express["static"],server=http.createServer(app);io=io(server);var opts={port:1947,baseDir:__dirname+"/../../"};io.on("connection",function(a){a.on("new-subscriber",function(b){a.broadcast.emit("new-subscriber",b)}),a.on("statechanged",function(b){delete b.state.overview,a.broadcast.emit("statechanged",b)}),a.on("statechanged-speaker",function(b){delete b.state.overview,a.broadcast.emit("statechanged-speaker",b)})}),["css","js","images","plugin","lib"].forEach(function(a){app.use("/"+a,staticDir(opts.baseDir+a))}),app.get("/",function(a,b){b.writeHead(200,{"Content-Type":"text/html"}),fs.createReadStream(opts.baseDir+"/index.html").pipe(b)}),app.get("/notes/:socketId",function(a,b){fs.readFile(opts.baseDir+"plugin/notes-server/notes.html",function(c,d){b.send(Mustache.to_html(d.toString(),{socketId:a.params.socketId}))})}),server.listen(opts.port||null);var brown="[33m",green="[32m",reset="[0m",slidesLocation="http://localhost"+(opts.port?":"+opts.port:"");console.log(brown+"reveal.js - Speaker Notes"+reset),console.log("1. Open the slides at "+green+slidesLocation+reset),console.log("2. Click on the link in your JS console to go to the notes page"),console.log("3. Advance through your slides and your notes will advance automatically");